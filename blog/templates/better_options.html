{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¸°ì¡´ìƒí’ˆê³¼ ì¶”ì²œìƒí’ˆ</title>
    <link rel="stylesheet" href="{% static 'css/better_options.css' %}">
    <link rel="stylesheet" href="{% static 'css/header.css' %}">

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // íƒ­ ë™ì‘ ì„¤ì •
            const tabs = document.querySelectorAll(".tab");
            const tabContents = document.querySelectorAll(".tab-content");

            tabs.forEach((tab, index) => {
                tab.addEventListener("click", () => {
                    tabs.forEach(t => t.classList.remove("active"));
                    tabContents.forEach(tc => tc.classList.remove("active"));

                    tab.classList.add("active");
                    tabContents[index].classList.add("active");
                });
            });

            // ìì„¸íˆë³´ê¸° í† ê¸€ ì„¤ì •
            document.querySelectorAll(".card-button").forEach((button) => {
                button.addEventListener("click", function () {
                    const detailsBox = this.nextElementSibling;
                    detailsBox.style.display = detailsBox.style.display === "block" ? "none" : "block";
                });
            });

            // ë‹«ê¸° ë²„íŠ¼ ë™ì‘ ì„¤ì •
            document.querySelectorAll(".close-button").forEach((closeButton) => {
                closeButton.addEventListener("click", function () {
                    const detailsBox = this.parentElement;
                    detailsBox.style.display = "none";
                });
            });

            // ì„œë²„ í†µì‹  í•¨ìˆ˜
            function addToFavorites(productId) {
                console.log("Added to favorites:", productId);
            }

            function removeFromFavorites(productId) {
                console.log("Removed from favorites:", productId);
            }
        });
    </script>
</head>
<body>
    {% csrf_token %}
    <header>
        <div class="navbar">
            <!-- ë¡œê³  -->
            <div class="logo">
                <a href="{% url 'loginmain' %}">
                    <img src="{% static 'img/header_logo.png' %}" alt="ë¡œê³ ">
                </a>
            </div>
            <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
            <div class="nav-links">
                <a href="{% url 'originreport' %}">ë‚´ ê¸ˆìœµ ë°”ë¡œë³´ê¸°</a>
                <div class="dropdown">
                    <a href="#">ë‚´ ì˜ˆ/ì ê¸ˆ ì°¾ê¸°</a>
                    <div class="dropdown-content">
                        <a href="{% url 'top5' %}">ì‹ ê·œì ê¸ˆì¶”ì²œ</a>
                        <a href="{% url 'better' %}">ê¸°ì¡´ìƒí’ˆë¹„êµ</a>
                    </div>
                </div>
                <a href="{% url 'spending_mbti' %}">ìŠ¬ê¸°ë¡œìš´ ì†Œë¹„ìƒí™œ</a>
            </div>
            <!-- íšŒì› ì •ë³´ ë° ë§ˆì´í˜ì´ì§€ -->
            <div class="user-info">
                <span>{{ user_name }}ë‹˜</span>
                <a href="./mypage">ë§ˆì´í˜ì´ì§€</a>
                <form method="POST" action="{% url 'logout' %}">
                    {% csrf_token %}
                    <button name="logout">ë¡œê·¸ì•„ì›ƒ</button>
                </form>
            </div>
        </div>
    </header>
</body>
</html>


<div class="main-content">
    <div class="main-title-box">
        <div class="main-title">
            {{ user_name }}ë‹˜ ë§ì¶¤ ì˜ˆ/ì ê¸ˆ ì¶”ì²œ ìƒí’ˆ TOP 5
        </div>
    </div>
</div>


    <!-- íƒ­ ì˜ì—­ -->
    <div class="container">
        <div class="tabs">
            <div class="tab active">ì˜ˆê¸ˆ ì¶”ì²œ</div>
            <div class="tab">ì ê¸ˆ ì¶”ì²œ</div>
        </div>

        <!-- ì˜ˆê¸ˆ ì¶”ì²œ ì½˜í…ì¸  -->
        <div class="tab-content active">
            <div class="recommendations">
                <!-- ê¸°ì¡´ ìƒí’ˆ ë°•ìŠ¤ -->
                <div class="existing-product-container">
                    <h2>ë§Œê¸°ê°€ ê°€ì¥ ê°€ê¹Œìš´ ì˜ˆê¸ˆ ìƒí’ˆì´ë‹¤~ëƒ¥ ğŸ¾</h2>
                    {% if nearest_d %}
                        <div class="card">
                            <img src="/static/img/ë¶€ì‚°ì€í–‰ë¡œê³ .png" alt="{{ product.bank }} ë¡œê³ ">
                            <div class="card-content_n">
                                <span class="card-title">{{ nearest_d.pname }}</span><br>
                                <p><strong>ì€í–‰:</strong> {{ nearest_d.bank_name }}</p>
                                <p><strong>ê¸°ì¤€ ê¸ˆë¦¬:</strong> {{ nearest_d.ds_rate }}%</p>
                                <p><strong>ë§Œê¸°ì¼:</strong> {{ nearest_d.end_date }}</p>
                                <p><strong>ë‚¨ì€ ì¼ìˆ˜:</strong> {{ nearest_d.days_remaining }}ì¼</p>
                            </div>
                        </div>
                        {% else %}
                        <p>í˜„ì¬ ë§Œê¸°ê°€ ê°€ê¹Œìš´ ì˜ˆê¸ˆ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.</p>
                        {% endif %}
                </div>
                <div class="existing-product-container">
                <h2>ì•„ë˜ì˜ ìƒí’ˆë“¤ì„ ì¶”ì²œí•œë‹¤ëƒ¥! ğŸ¾</h2>
                {% for product in deposit_recommend %}
                <div class="card">
                    <img src="{% static product.logo %}" alt="{{ product.bank }} ë¡œê³ ">
                    <div class="card-content">
                        <span class="card-title">{{ product.name }}</span><br>
                        <p><strong>ì€í–‰:</strong> {{ product.bank }}</p>
                        <p><strong>ê¸°ì¤€ ê¸ˆë¦¬:</strong> {{ product.baser }}</p>
                        <p><strong>ìµœëŒ€ ê¸ˆë¦¬:</strong> {{ product.maxir }}</p>
                        <p><strong>ê°€ì… ë°©ë²•:</strong> {{ product.method }}</p>
                        <p><strong>ìƒí’ˆ ì½”ë“œ:</strong>{{ product.dsid }}</p>
                    </div>
                    {% if product.dsid %}
                    <a href="{% url 'd-detail' product.dsid %}" class="card-button">ìì„¸íˆë³´ê¸°</a>
                    {% else %}
                        <span>No Detail Available</span>
                    {% endif %}
                </div>
                {% endfor %}
                <a href="{% url 'info' %}" class="new-action-button" style="display: block; text-align: center; margin: 20px auto;">ì„¸ë¶€ ì¡°ê±´ ì„¤ì •í•˜ê¸°</a>
                </div>
            </div>
        </div>

        <!-- ì ê¸ˆ ì¶”ì²œ ì½˜í…ì¸  -->
        <div class="tab-content">
            <div class="recommendations">
                <!-- ê¸°ì¡´ ìƒí’ˆ ë°•ìŠ¤ -->
                <div class="existing-product-container">
                    <h2>ë§Œê¸°ê°€ ê°€ì¥ ê°€ê¹Œìš´ ì ê¸ˆ ìƒí’ˆì´ë‹¤~ëƒ¥ ğŸ¾</h2>
                    {% if nearest_s %}
                        <div class="card">
                            <img src="{% static product.logo %}" alt="{{ product.bank }} ë¡œê³ ">
                            <div class="card-content">
                                <span class="card-title">{{ nearest_s.pname }}</span><br>
                                <p><strong>ì€í–‰:</strong> {{ nearest_s.bank_name }}</p>
                                <p><strong>ê¸°ì¤€ ê¸ˆë¦¬:</strong> {{ nearest_s.ds_rate }}%</p>
                                <p><strong>ë§Œê¸°ì¼:</strong> {{ nearest_s.end_date }}</p>
                                <p><strong>ë‚¨ì€ ì¼ìˆ˜:</strong> {{ nearest_s.days_remaining }}ì¼</p>
                            </div>
                        </div>
                        {% else %}
                        <p>í˜„ì¬ ë§Œê¸°ê°€ ê°€ê¹Œìš´ ì˜ˆê¸ˆ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.</p>
                        {% endif %}
                </div>
                <div class="existing-product-container">
                <h2>ì•„ë˜ì˜ ìƒí’ˆë“¤ì„ ì¶”ì²œí•œë‹¤ëƒ¥! ğŸ¾</h2>
                {% for product in final_recommend %}
                <div class="card">
                    <img src="{% static product.logo %}" alt="{{ product.bank }} ë¡œê³ ">
                    <div class="card-content">
                        <span class="card-title">{{ product.product_name }}</span>
                        <p><strong>ì€í–‰:</strong> {{ product.bank_name }}</p>
                        <p><strong>ê¸°ì¤€ ê¸ˆë¦¬:</strong> {{ product.base_rate }}</p>
                        <p><strong>ìµœëŒ€ ê¸ˆë¦¬:</strong> {{ product.max_preferential_rate }}</p>
                        <p><strong>ê°€ì… ë°©ë²•:</strong> {{ product.signup_method }}</p>
                        <p><strong>ìƒí’ˆ ì½”ë“œ:</strong>{{ product.DSID }}</p>
                    </div>
                    {% if product.DSID %}
                    <a href="{% url 's-detail' product.DSID %}" class="card-button">ìì„¸íˆë³´ê¸°</a>
                    {% else %}
                        <span>No Detail Available</span>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
            <a href="{% url 'info' %}" class="new-action-button" style="display: block; text-align: center; margin: 20px auto;">ì„¸ë¶€ ì¡°ê±´ ì„¤ì •í•˜ê¸°</a>
            </div>
        </div>
        
        </div>
    </div>

    <footer>
        <p style="margin: 5px; line-height: 1.2; text-decoration: none; color: #afafb0; font-size: 0.8rem;">ì„œìš¸íŠ¹ë³„ì‹œ ë§ˆí¬êµ¬ ì›”ë“œì»µë¶ë¡œ 434 ìƒì•”ITíƒ€ì›Œ 6ì¸µ</p> 
        <p style="margin: 5px; line-height: 1.2; text-decoration: none; color: #afafb0; font-size: 0.8rem;">ê³ ê°ì§€ì› : 02-3151-7000 | ì´ë©”ì¼: woorifis.lab44@gmail.com </p >
        <p style="margin: 5px; line-height: 1.2; text-decoration: none; color: #afafb0; font-size: 0.8rem;">COPYRIGHTÂ©ìš°ë¦¬ì²œë§Œí•´ìš”</p >
    </footer >

</body>
</html>
