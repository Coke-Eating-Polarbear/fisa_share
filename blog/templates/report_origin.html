<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>자산 보고서</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* 전체 컨테이너 설정 */
        .chart-container {
            display: flex;
            justify-content: space-around; /* 그래프 간 간격 균등 분배 */
            flex-wrap: wrap; /* 화면이 작아지면 줄바꿈 */
            gap: 20px; /* 그래프 간 간격 */
        }

        /* 개별 그래프 */
        .chart-box {
            width: 22%; /* 화면의 22%씩 차지 */
            min-width: 200px; /* 최소 너비 설정 */
        }

        canvas {
            width: 100%; /* 캔버스 크기를 부모 요소에 맞춤 */
            height: auto;
        }
    </style>
</head>
<body>
    <h1>{{ user_name }}의 자산 보고서</h1>

    <div class="chart-container">
        <!-- 총자산 -->
        <div class="chart-box">
            <h3>총자산</h3>
            <canvas id="totalAssetChart"></canvas>
        </div>

        <!-- 현금자산 -->
        <div class="chart-box">
            <h3>현금자산</h3>
            <canvas id="cashAssetChart"></canvas>
        </div>

        <!-- 수입 -->
        <div class="chart-box">
            <h3>수입</h3>
            <canvas id="incomeChart"></canvas>
        </div>

        <!-- 지출 -->
        <div class="chart-box">
            <h3>지출</h3>
            <canvas id="spendingChart"></canvas>
        </div>
    </div>

    <script>
        // Django에서 전달된 데이터를 JavaScript로 변환
        const barData = {{ bar_data|safe }};

        // 총자산 그래프
        const totalAssetCtx = document.getElementById('totalAssetChart').getContext('2d');
        new Chart(totalAssetCtx, {
            type: 'bar',
            data: {
                labels: ['총자산'],
                datasets: [{
                    label: '총자산',
                    data: [barData['총자산']],
                    backgroundColor: '#98FB98',
                }]
            }
        });

        // 현금자산 그래프
        const cashAssetCtx = document.getElementById('cashAssetChart').getContext('2d');
        new Chart(cashAssetCtx, {
            type: 'bar',
            data: {
                labels: ['현금자산'],
                datasets: [{
                    label: '현금자산',
                    data: [barData['현금자산']],
                    backgroundColor: '#90EE90',
                }]
            }
        });

        // 수입 그래프
        const incomeCtx = document.getElementById('incomeChart').getContext('2d');
        new Chart(incomeCtx, {
            type: 'bar',
            data: {
                labels: ['수입'],
                datasets: [{
                    label: '수입',
                    data: [barData['수입']],
                    backgroundColor: '#87CEEB',
                }]
            }
        });

        // 지출 그래프
        const spendingCtx = document.getElementById('spendingChart').getContext('2d');
        new Chart(spendingCtx, {
            type: 'bar',
            data: {
                labels: ['지출'],
                datasets: [{
                    label: '지출',
                    data: [barData['지출']],
                    backgroundColor: '#FFC0CB',
                }]
            }
        });
    </script>
</body>
</html>
